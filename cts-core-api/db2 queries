CREATE TABLE Role(
role_id integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
role_type varchar(20) NOT NULL
)


INSERT INTO ROLE (role_type) Values('Updater');

DROP TABLE Role;
SELECT * FROM Branch;
SELECT * FROM "ROLE";

CREATE TABLE Users (
    user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    role_id INTEGER NOT NULL,
    branch_cd INTEGER NOT NULL,
    username VARCHAR(20) NOT NULL UNIQUE,
    useremail VARCHAR(25) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL, 
    FOREIGN KEY (role_id) REFERENCES Role(role_id) ON DELETE CASCADE,
    FOREIGN KEY (branch_cd) REFERENCES Branch(branch_cd) ON DELETE CASCADE
);

INSERT INTO users(USER_ID, ROLE_ID , BRANCH_CD) VALUES (2,1,1);



DROP  TABLE Users;
ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY;
--DROP TABLE Users;

SELECT * FROM Users;



--DROP  TABLE Branch;
CREATE TABLE Branch(
branch_cd integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
branch_name varchar(20) NOT NULL
)
INSERT INTO Branch (branch_name) VALUES ('Hadeed');

CREATE TABLE Logging_File_Details(
file_id integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
file_name varchar(50) ,
record_count integer ,
accept_record_count integer ,
reject_record_count integer ,
user_id integer ,
file_date date ,
file_time TIME ,
acceptedRows varchar(1000),
rejectedRows varchar(1000),
fileType varchar(20),
uploadedBy varchar(30),
CONSTRAINT fk1 FOREIGN KEY (user_id) REFERENCES Users(user_id)
);
--DROP TABLE Logging_File_Details;
SELECT * FROM Logging_File_Details;

--ALTER TABLE Logging_File_Details ADD COLUMN fileType varchar(100);

--DELETE FROM Logging_File_Details WHERE file_id =1;


CREATE TABLE Consignment_Details(
consignment_id integer NOT NULL PRIMARY KEY,
courier varchar(20) ,
booking_date Date ,
account_no varchar(30) ,
account_title varchar(30) ,
shipping_bill varchar(30) ,
address varchar(100) ,
city varchar(50) ,
email varchar(50) ,
mobile_no varchar(20) ,
letter_type varchar(60) ,
card_no varchar(60) ,
card_type varchar(30) ,
card_creation_date DATE ,
return_reason varchar(100) ,
return_date DATE ,
branch_cd varchar(10) ,
receiver_name_b varchar(50),
receiver_name_d varchar(50),
delivery_date date,
status varchar(30),
relationship varchar(50),
receiver_cnic varchar(50),
card_status varchar(30),
customer_cnic_number varchar(50)
)

--DROP TABLE CONSIGNMENT_DETAILS ;
--ALTER TABLE Consignment_Details ALTER COLUMN card_no SET DATA TYPE varchar(50); 

--customer cnic to be added
INSERT INTO Consignment_Details (
    consignment_id, courier, booking_date, account_no, account_title,
    address, city, mobile_no, letter_type, card_no, branch_cd, status, receiver_cnic
) VALUES (
    1002, 'UPS', '2023-10-27', 'ACC456', 'Alice Johnson',
    '456 Oak Ave', 'Otherville', '555-987-6543', 'Letter', 'CARD101', 'BR002', 'In Transit', '98765432109'
);
--drop table Consignment_Details;
TRUNCATE  Consignment_Details immediate;
SELECT * FROM  Consignment_Details ;

--RENAME COLUMN catd_status TO card_status;

CREATE TABLE Lov_table(
lov_id integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
lov_value varchar(20) NOT NULL
)
INSERT INTO lov_table(lov_value) VALUES ('india');
DROP TABLE lov_table;
SELECT * FROM lov_table;

CREATE TABLE User(
id integer NOT NULL PRIMARY KEY,
name varchar(20) NOT NULL,
email varchar(20) NOT NULL
)

SELECT * FROM USERs;
INSERT INTO USER VALUES(2, 'Rakesh', 'rakesh@gmail.com')



UPDATE ROLE SET ROLE_name='Viewer' WHERE role_id=1;
SELECT * FROM ROLE;
SELECT * FROM Users;

--CREATE TABLE test (name varchar(20) NOT NULL); 
--INSERT INTO test values('mufeeza');
--SELECT * FROM test;
CREATE TABLE INCREMENT_FIle_Count(file_id integer NOT NULL PRIMARY KEY, accpeted_count integer);
INSERT INTO INCREMENT_FIle_Count VALUES (1, 0);
SELECT * FROM INCREMENT_FIle_Count;

SELECT * FROM Consignment_Details WHERE consignment_id = 2;

SELECT * FROM Consignment_Details WHERE UPPER(city) like UPPER('%KARA%') 
Consignment_Details

